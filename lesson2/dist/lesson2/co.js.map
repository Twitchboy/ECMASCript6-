{"version":3,"sources":["../../co.js"],"names":["co","require","fetch","res","json","movie","summary","console","log","run","generator","iterator","it","next","promise","value","then","it2","data","promise2","data2"],"mappings":";;;;;;;;AAAA,IAAMA,KAAKC,QAAQ,IAAR,CAAX;AACA,IAAMC,QAAQD,QAAQ,YAAR,CAAd;;AAEA;AACA;AACA;AACAD,4CAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BACmBE,MAAM,yCAAN,CADnB;;AAAA;AACOC,uBADP;AAAA;AAAA,2BAEqBA,IAAIC,IAAJ,EAFrB;;AAAA;AAEOC,yBAFP;AAGOC,2BAHP,GAGiBD,MAAMC,OAHvB;;;AAKCC,4BAAQC,GAAR,CAAY,SAAZ,EAAuBF,OAAvB;;AALD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAH;;AAQA;;;;AAIA,SAASG,GAAT,CAAcC,SAAd,EAAyB;AACrB,QAAMC,WAAWD,WAAjB;AACA,QAAME,KAAKD,SAASE,IAAT,EAAX;AACA,QAAMC,UAAUF,GAAGG,KAAnB;;AAEAD,YAAQE,IAAR,CAAa,gBAAQ;AACjB,YAAMC,MAAMN,SAASE,IAAT,CAAcK,IAAd,CAAZ;AACA,YAAMC,WAAWF,IAAIF,KAArB;;AAEAI,iBAASH,IAAT,CAAc,iBAAS;AACnBL,qBAASE,IAAT,CAAcO,KAAd;AACH,SAFD;AAGH,KAPD;AAQH;;AAEDX,6CAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BACkBP,MAAM,yCAAN,CADlB;;AAAA;AACMC,uBADN;AAAA;AAAA,2BAEoBA,IAAIC,IAAJ,EAFpB;;AAAA;AAEMC,yBAFN;AAGMC,2BAHN,GAGgBD,MAAMC,OAHtB;;;AAKAC,4BAAQC,GAAR,CAAY,SAAZ,EAAuBF,OAAvB;;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAJ","file":"co.js","sourcesContent":["const co = require('co');\nconst fetch = require('node-fetch');\n\n// co 让每一个暂停，可以自动的一步步执行\n// co 缺点：\n// 1. 不能 yeild 字符串、boolean\nco(function* () {\n    const res = yield fetch('https://api.douban.com/v2/movie/1291843');\n    const movie = yield res.json();\n    const summary = movie.summary;\n\n    console.log('summary', summary);\n});\n\n/**\n * 模拟下 co 来实现上面的代码\n * @param {generator} generator \n */\nfunction run (generator) {\n    const iterator = generator();\n    const it = iterator.next();\n    const promise = it.value;\n\n    promise.then(data => {\n        const it2 = iterator.next(data);\n        const promise2 = it2.value;\n\n        promise2.then(data2 => {\n            iterator.next(data2);\n        });\n    })\n}\n\nrun(function* () {\n    const res = yield fetch('https://api.douban.com/v2/movie/1291843');\n    const movie = yield res.json();\n    const summary = movie.summary;\n\n    console.log('summary', summary);\n});"]}